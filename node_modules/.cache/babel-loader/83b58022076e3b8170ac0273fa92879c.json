{"ast":null,"code":"import n, { useState as t, useContext as r } from \"react\";\n\nvar i = function (n) {\n  return n.length > 0;\n},\n    e = function (n, t) {\n  return n.includes(t);\n},\n    u = function (n, t) {\n  return e(n, t) ? n : n.concat([t]);\n},\n    c = function (n, t) {\n  return n.filter(function (n) {\n    return n !== t;\n  });\n},\n    a = n.createContext();\n\nfunction o(n) {\n  return r(a).waiters.includes(n.on) ? n.fallback : n.children;\n}\n\nfunction f(r) {\n  var f = t([]),\n      s = f[0],\n      g = f[1];\n  return n.createElement(a.Provider, {\n    value: {\n      waiters: s,\n      createWaitingContext: function (t) {\n        return {\n          isWaiting: function () {\n            return e(s, t);\n          },\n          startWaiting: function () {\n            return g(u(s, t));\n          },\n          endWaiting: function () {\n            return g(c(s, t));\n          },\n          Wait: function (r) {\n            return n.createElement(o, Object.assign({}, {\n              on: t\n            }, r));\n          }\n        };\n      },\n      anyWaiting: function () {\n        return i(s);\n      },\n      isWaiting: function (n) {\n        return e(s, n);\n      },\n      startWaiting: function (n) {\n        g(u(s, n));\n      },\n      endWaiting: function (n) {\n        g(c(s, n));\n      }\n    }\n  }, r.children);\n}\n\nfunction s() {\n  var n = r(a);\n  return Object.assign({}, n, {\n    Wait: o\n  });\n}\n\nexport { f as Waiter, s as useWait };","map":{"version":3,"sources":["../src/api.js"],"names":["const"],"mappings":"kDAAOA,O","sourcesContent":["export const anyWaiting = waiters => waiters.length > 0;\n\nexport const isWaiting = (waiters, waiter) => waiters.includes(waiter);\n\nexport const startWaiting = (waiters, waiter) => {\n  if (isWaiting(waiters, waiter)) return waiters;\n  return [...waiters, waiter];\n};\n\nexport const endWaiting = (waiters, waiter) => {\n  return waiters.filter(w => w !== waiter);\n};\n"]},"metadata":{},"sourceType":"module"}